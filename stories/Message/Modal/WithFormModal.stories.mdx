import { ArgsTable, Meta, Story, Canvas } from "@storybook/addon-docs/blocks";
import WithFormModal from "@/src/Components/Message/Modal/WithFormModal";
import Input from "@/src/DataEntry/Input";
import Button from "@/src/Components/Button/Button";

<Meta
    title="DESIGN SYSTEM/Message/Modal/WithFormModal"
    component={ WithFormModal }
    argTypes={{
        show: {
            description: "모달 활성화",
            defaultValue: false,
            control: {
                type: "boolean",
            },
        },
        align: {
            description: "정렬",
            defaultValue: "center",
            control: {
                type: "select",
                options: ["center", "left", "right"]
            },
            table: {
                type: {
                    summary: "string",
                    detail: '"center" "left" "right"',
                },
            },
        },
        loading: {
            description: "버튼 로딩",
            defaultValue: false,
            control: {
                type: "boolean",
            },
        },
        successMessage: {
            description: "버튼명",
            defaultValue: "확인",
            control: {
                type: "text",
            },
        },
        showActionButton: {
            description: "버튼 보이기",
            defaultValue: true,
            control: {
                type: "boolean",
            },
        },
        showCloseButton: {
            description: "닫기 버튼 보이기",
            defaultValue: false,
            control: {
                type: "boolean",
            },
        },
        persistent: {
            description: "overlay 클릭해도 모달 닫지 않기",
            defaultValue: false,
            control: {
                type: "boolean",
            },
        },
        maxWidth: {
            description: "모달 최대 width",
            defaultValue: "420px",
            control: {
                type: "text",
            },
        },
        disabled: {
            description: "버튼 비활성화",
            defaultValue: false,
            control: {
                type: "boolean",
            },
        },
        title: {
            description: "모달 제목",
            defaultValue: "Basic Modal",
            control: { type: "text" },
        },
    }}
/>

export const Basic = (args, { argTypes }) => ({
    props: Object.keys(argTypes),
    components: { WithFormModal, Input, Button },
    template: `
        <div>
            <Button @click="show = true">Open</Button>
            <WithFormModal
                :show.sync="show"
                :show-close-button="showCloseButton"
                :persistent="persistent"
                :align="align"
                :loading="loading"
                :success-message="successMessage"
                :show-action-button="showActionButton"
                :max-width="maxWidth"
            >
                <template v-slot:title>
                    {{ title }}
                </template>
                <template v-slot:contents>
                  <div class="mb-12">title 아래 여백이 20px로 증가한다.</div>
                  <Input full />
                </template>
            </WithFormModal>
        </div>`
});

# WithFormModal

**WithFormModal** 컴포넌트의 문서입니다.

<Story name="Basic" height="100px">
    {Basic.bind({})}
</Story>

<ArgsTable story="Basic" />

## Stories
### InputGroup
<Canvas>
    <Story name="InputGroup" height="100px">
        {{
            data: () => ({
                show: false,
            }),
            methods: {
                handleSubmitModal() {
                    this.show = false;
                },
            },
            template: `
                <div>
                    <Button @click="show = true">Open</Button>
                    <WithFormModal
                        :show.sync="show"
                        :show-close-button="true"
                        :persistent="false"
                        align="center"
                        :success-callback="handleSubmitModal"
                    >
                        <template v-slot:title>
                          InputGroup
                        </template>
                        <template v-slot:contents>
                            <div style="display: flex; flex-direction: row; align-items: center; justify-content: space-between" class="mb-12">
                                <Input type="underlined" placeholder="underlined input: 버튼 height: 36px" full class="mr-4" />
                                <Button type="outlined" @click="handleSubmitModal">버튼1</Button>
                            </div>
                            <div style="display: flex; flex-direction: row; align-items: center; justify-content: space-between">
                                <Input full placeholder="outlined input: 버튼 height 40px" class="mr-4" />
                                <Button type="outlined" @click="handleSubmitModal">버튼2</Button>
                            </div>
                        </template>
                    </WithFormModal>
                </div>
            `,
            components: {
                WithFormModal, Input, Button
            }
        }}
    </Story>
</Canvas>

### Form Input Validation
<Canvas>
    <Story name="FormInputValidation" height="100px">
        {{
            data: () => ({
                show: false,
                checkValue: '',
            }),
            computed: {
                handleDisabled() {
                    return this.checkValue !== '제출합니다';
                },
            },
            methods: {
                handleSubmitModal() {
                    this.show = false;
                },
            },
            template: `
                <div>
                    <Button @click="show = true">Open</Button>
                    <WithFormModal
                        :show.sync="show"
                        :show-close-button="true"
                        :persistent="false"
                        align="center"
                        :disabled="handleDisabled"
                        :success-callback="handleSubmitModal"
                        :show-action-button="true"
                    >
                        <template v-slot:title>
                          과제 제출 확인
                        </template>
                        <template v-slot:contents>
                            <div>한 번 제출된 과제는 수정할 수 없으니 제출 전 다시 한번 확인해주세요 :)</div>
                            <div>제출을 원한다면 아래 문구를 작성하세요.</div>
                            <div style="display: flex; flex-direction: row; align-items: center; justify-content: space-between">
                                <Input :value.sync="checkValue" full placeholder="제출합니다" align="center" class="mr-4" />
                            </div>
                        </template>
                    </WithFormModal>
                </div>
            `,
            components: {
                WithFormModal, Input, Button
            }
        }}
    </Story>
</Canvas>

