import { ArgsTable, Meta, Story, Canvas } from '@storybook/addon-docs/blocks';
import CDropdown from '@/components/components/dataEntry/CDropdown.vue';
import CList from '@/components/components/dataDisplay/list/list/CList.vue';
import CListItem from '@/components/components/dataDisplay/list/list/CListItem.vue';
import CDivider from '@/components/elements/utility/CDivider.vue';
import CSearchInput from '@/components/components/dataEntry/input/CSearchInput.vue';
import CTextField from '@/components/components/dataEntry/input/CTextField.vue';
import CLabel from '@/components/components/dataDisplay/CLabel.vue';
import clickOutside from '@/directives/click-outside';

<Meta
    title="Data Entry/Dropdown/Dropdown"
    component={ CDropdown }
    argTypes={{
        maxHeight: {
            description: "리스트 최대 높이",
            defaultValue: "130px",
            control: { type: "text" },
        },
    }}
/>


export const Default = (args, { argTypes }) => ({
    props: Object.keys(argTypes),
    components: { CDropdown, CSearchInput, CList, CListItem, CDivider },
    data: () => ({
        listItems: ['List1', 'List2', 'List3', 'List4', 'List5'],
        showSearchDropdown: false,
        value: '',
    }),
    computed: {
        computedSearchInputMaxWidth() {
            return { 'max-width': this. full ? '100%' : this.maxWidth };
        }
    },
    methods: {
        clickDropdownItem(item) {
            this.value = item;
        },
    },
    template:
        `<CDropdown :max-width="maxWidth" :max-height="maxHeight" :label="label" :full="full" :vertical="vertical">
            <template v-slot:item>
                <CSearchInput
                    full
                    :showSearchDropdown.sync="showSearchDropdown"
                    :value.sync="value"
                    :style="computedSearchInputMaxWidth"
                />
            </template>
            <template v-slot:list>
                <CList v-if="showSearchDropdown" spacing>
                    <template v-for="(item, index) in listItems">
                        <CListItem :key="'list-item-' + index" size="large" @click="clickDropdownItem(item)">
                            {{ item }}
                        </CListItem>
                        <CDivider :key="'divider-' + index" />
                    </template>
                </CList>
            </template>
        </CDropdown>`,
});

# Dropdown

**c-dropdown** 컴포넌트의 문서입니다.

<Story name="Default" height="150px">
    {Default.bind({})}
</Story>

<ArgsTable story="Default" />

## Stories
### All
<Canvas>
    <Story name="All" height="240px">
        {{
            data: () => ({
                showSearchDropdown: false,
                showInputDropdown: false,
                listItems: ['List1', 'List2'],
                searchInputValue: '',
                inputValue: '',
            }),
            methods: {
                clickSearchInputDropdownItem(item) {
                    this.searchInputValue = item;
                },
                clickInputDropdownItem(item) {
                    this.inputValue = item;
                },
                closeList() {
                    this.showInputDropdown = false;
                },
            },
            template: `
                <div>
                    <div style="margin-bottom: 20px">
                        <CDropdown max-width="230px" label="searchInput Dropdown">
                            <template v-slot:item>
                                <CSearchInput
                                    full
                                    :showSearchDropdown.sync="showSearchDropdown"
                                    :value.sync="searchInputValue"
                                    style="width: 230px"
                                />
                            </template>
                            <template v-slot:list v-if="showSearchDropdown">
                                <CLabel type="dataDisplay" style="padding: 4px 0">
                                    인기검색어
                                </CLabel>
                                <CList spacing>
                                    <template v-for="(item, index) in listItems">
                                        <CListItem
                                            size="large"
                                            :key="'list-item-' + index"
                                            @click="clickSearchInputDropdownItem(item)"
                                        >
                                            {{ item }}
                                        </CListItem>
                                        <CDivider :key="'divider-' + index" />
                                    </template>
                                </CList>
                            </template>
                        </CDropdown>
                    </div>
                    <CDropdown max-width="230px" label="Input Dropdown">
                        <template v-slot:item>
                            <CTextField
                                v-click-outside="closeList"
                                :value.sync="inputValue"
                                outline
                                full
                                @click="showInputDropdown = !showInputDropdown"
                                style="width: 230px"
                            />
                        </template>
                        <template v-slot:list>
                            <CList v-if="showInputDropdown" spacing>
                                <template v-for="(item, index) in listItems">
                                    <CListItem :key="'list-item-' + index" size="large" @click="clickInputDropdownItem(item)">
                                        {{ item }}
                                    </CListItem>
                                    <CDivider :key="'divider-' + index" />
                                </template>
                            </CList>
                        </template>
                    </CDropdown>
                </div>
            `,
            components: { CDropdown, CSearchInput, CList, CListItem, CDivider, CTextField, CLabel },
            directives: {
                clickOutside,
            },
        }}
    </Story>
</Canvas>
