import { ArgsTable, Meta, Story, Canvas } from '@storybook/addon-docs/blocks';
import CoreCard from '@/components/card/CoreCard';
import Content from '@/components/content/Content';
import Avatar from '@/components/avatar/Avatar.vue';
import Icon from '@/components/icon/Icon';
import NewGrid from '@/components/grid/NewGrid.vue';
import NewRow from '@/components/grid/NewRow.vue';
import NewCol from '@/components/grid/NewCol.vue';
import Typography from '@/components/typography/Typography';
import ProfileWithText from '@/components/content/ProfileWithText';
import ChipGroup from '@/components/chips/ChipGroup';
import Chip from '@/components/chips/Chip';

<Meta
    title="Data Display/Card/CoreCard"
    component={ CoreCard }
    argTypes={{
        overlineLeft: {
            defaultValue: 'lg화학'
        },
        overlineRight: {
            defaultValue: '기계엔지니어'
        },
        title: {
            defaultValue: 'lg화학 공무직 기계엔지니어 업무'
        },
        body: {
            defaultValue: '석유화학사업본부 공무직의 경우 주로 설비의 유지/보수와 관련된 업무를 수행하는 것으로 알고 있습니다. 한 팀 혹은 인원의 업무 분담이 어떤 식으로 되어있는지 궁금합니다. 예) 회전기계팀, 장치팀, 배관팀 등으로 구분되어 있는지 아니면 공정별로 필요한 기기들을 한팀에서 전부 관리한다던지......석유화학사업본부 공무직의 경우 주로 설비의 유지/보수와 관련된 업무를 수행하는 것으로 알고 있습니다. 한 팀 혹은 인원의 업무 분담이 어떤 식으로 되어있는지 궁금합니다. 예) 회전기계팀, 장치팀, 배관팀 등으로 구분되어 있는지 아니면 공정별로 필요한 기기들을 한팀에서 전부 관리한다던지'
        },
        repliesCount: {
            defaultValue: 2,
        },
        showRepliesCount: {
            defaultValue: 2,
        },
        likeCount: {
            defaultValue: 1,
        }
    }}
/>

export const Default = (args, { argTypes }) => ({
    props: Object.keys(argTypes),
    components: {
        CoreCard,
        Content,
        Avatar,
        Icon,
        NewGrid,
        NewRow,
        NewCol,
        Typography,
        ProfileWithText,
        Chip,
        ChipGroup,
    },
    computed: {
        repliesTemp() {
            const repliesItem = {
                id: 1,
                belong: 'LG화학',
                answer:
                    '안녕하세요 멘티님 석유화학사업본부의 경우 공무 조직은 각 공장 또는 공정별로 나누어져서 분장되어있으며, 어쩌구저쩌구',
            };
            return Array.from({length: this.repliesCount}, () => repliesItem);
        }
    },
    template: `
        <NewGrid fluid>
			<NewRow :style="isMobile ? 'background: #F4F5F7' : ''">
				<NewCol :col-sm="12" :col-lg="6" no-gutters>
					<CoreCard
						:overline-left="overlineLeft"
						:overline-right="overlineRight"
						:title="title"
						:body="body"
						:replies-count="repliesCount"
                        :show-replies-count="showRepliesCount"
						:like-count="likeCount"
					>
						<template v-slot:replies>
							<template v-if="repliesTemp" >
								<ProfileWithText v-for="(item, index) in repliesTemp" v-if="index < showRepliesCount" :key="'reply-' + index">
									<template v-slot:avatar>
										<Avatar type="nickname" :text="item.belong.substr(0, 1)" size="small"/>
									</template>
									<template v-slot:name>
                                        <Typography type="body2" color="gray850" font-weight="semi-bold" element="span">닉네임</Typography>
                                        <Typography type="caption1" font-weight="regular" element="span" color="gray500">{{ item.belong }}</Typography>
									</template>
									<template v-slot:icon>
										<Icon name="IconCheckRoundSmallFill" color="gray400"/>
									</template>
									<template v-slot:text>
										<Typography element="p" type="body2" color="gray800" class="text-truncate">
											{{ item.answer }}
										</Typography>
									</template>
								</ProfileWithText>
							</template>
						</template>
					</CoreCard>
				</NewCol>
			</NewRow>
		</NewGrid>
        `,
});

# CoreCard

**CoreCard** 컴포넌트의 문서입니다.

<Story name="Default">{Default.bind({})}</Story>

<ArgsTable story="Default" />

## Stories

### All

<Canvas>
    <Story name="All">
        {{
            components: {
                CoreCard,
                Content,
                Avatar,
                Icon,
                NewGrid,
                NewRow,
                NewCol,
                Typography,
                ProfileWithText,
                Chip,
                ChipGroup,
            },
            data() {
                return {
                    showRepliesCount: 2,
                    questions: [
                        {
                            company: 'lg화학',
                            job: '기계엔지니어',
                            title: 'lg화학 공무직 기계엔지니어 업무',
                            content: `석유화학사업본부 공무직의 경우 주로 설비의 유지/보수와 관련된 업무를 수행하는 것으로 알고 있습니다.
						한 팀 혹은 인원의 업무 분담이 어떤 식으로 되어있는지 궁금합니다. 예) 회전기계팀, 장치팀, 배관팀 등으로 구분되어 있는지
						아니면 공정별로 필요한 기기들을 한팀에서 전부 관리한다던지......
						석유화학사업본부 공무직의 경우 주로 설비의 유지/보수와 관련된 업무를 수행하는 것으로 알고 있습니다.
						한 팀 혹은 인원의 업무 분담이 어떤 식으로 되어있는지 궁금합니다. 예) 회전기계팀, 장치팀, 배관팀 등으로 구분되어 있는지
						아니면 공정별로 필요한 기기들을 한팀에서 전부 관리한다던지`,
                            like: 2,
                            replies: [
                                {
                                    id: 1,
                                    belong: 'LG화학',
                                    answer:
                                        '안녕하세요 멘티님 석유화학사업본부의 경우 공무 조직은 각 공장 또는 공정별로 나누어져서 분장되어있으며, 어쩌구저쩌구',
                                },
                                {
                                    id: 2,
                                    belong: '한진도시가스',
                                    answer:
                                        '안녕하세요 멘티님 주로 공무 엔지니어는 멘티님이 말씀하신 것처럼 설비의 유지보수와 설계를 담당합니다. 어쩌구저쩌구',
                                },
                                {
                                    id: 3,
                                    belong: 'LG화학',
                                    answer:
                                        '안녕하세요 멘티님 석유화학사업본부의 경우 공무 조직은 각 공장 또는 공정별로 나누어져서 분장되어있으며, 어쩌구저쩌구',
                                },
                            ],
                        },
                        {
                            company: 'lg화학',
                            job: '기계엔지니어',
                            title: 'lg화학 공무직 기계엔지니어 업무',
                            content: `석유화학사업본부 공무직의 경우 주로 설비의 유지/보수와 관련된 업무를 수행하는 것으로 알고 있습니다.
						한 팀 혹은 인원의 업무 분담이 어떤 식으로 되어있는지 궁금합니다. 예) 회전기계팀, 장치팀, 배관팀 등으로 구분되어 있는지
						아니면 공정별로 필요한 기기들을 한팀에서 전부 관리한다던지......
						석유화학사업본부 공무직의 경우 주로 설비의 유지/보수와 관련된 업무를 수행하는 것으로 알고 있습니다.
						한 팀 혹은 인원의 업무 분담이 어떤 식으로 되어있는지 궁금합니다. 예) 회전기계팀, 장치팀, 배관팀 등으로 구분되어 있는지
						아니면 공정별로 필요한 기기들을 한팀에서 전부 관리한다던지`,
                            like: 2,
                            replies: [
                                {
                                    id: 1,
                                    belong: 'LG화학',
                                    answer:
                                        '안녕하세요 멘티님 석유화학사업본부의 경우 공무 조직은 각 공장 또는 공정별로 나누어져서 분장되어있으며, 어쩌구저쩌구',
                                },
                                {
                                    id: 2,
                                    belong: '한진도시가스',
                                    answer:
                                        '안녕하세요 멘티님 주로 공무 엔지니어는 멘티님이 말씀하신 것처럼 설비의 유지보수와 설계를 담당합니다. 어쩌구저쩌구',
                                },
                            ],
                        },
                    ],
                };
            },
            methods: {
                getHiddenRepliesCount(repliesLength) {
                    return repliesLength - this.showRepliesCount;
                },
            },
            template: `
                <NewGrid fluid>
                    <NewRow :style="isMobile ? 'background: #F4F5F7' : ''">
                        <NewCol :col-sm="12" :col-lg="6" no-gutters v-for="(item, index) in questions" :key="index">
                            <CoreCard
                                :overline-left="item.company"
                                :overline-right="item.job"
                                :title="item.title"
                                :body="item.content"
                                :hidden-replies-count="getHiddenRepliesCount(item.replies.length)"
                                :replies-count="item.replies.length"
                                :like-count="item.like"
                                :class="isMobile ? 'mb-20' : index + 1 < questions.length ? 'mr-20' : ''"
                            >
                                <template v-slot:chips>
                                    <ChipGroup class="mb-8" style="margin-top: -2px">
                                        <Chip size="small" color="primary">조회수 TOP</Chip>
                                        <Chip size="small">이직 고민</Chip>
                                    </ChipGroup>
                                </template>
                                <template v-slot:replies>
                                    <template v-for="(item, index) in item.replies">
                                        <ProfileWithText v-if="index < 2" :key="'reply-' + item.id">
                                            <template v-slot:avatar>
                                                <Avatar type="nickname" :text="item.belong.substr(0, 1)" size="small"/>
                                            </template>
                                            <template v-slot:name>
                                                {{ item.belong }}
                                            </template>
                                            <template v-slot:icon>
                                                <Icon name="IconCheckRoundSmallFill" color="primary"/>
                                            </template>
                                            <template v-slot:text>
                                                <Typography element="p" type="body2" color="gray800" class="text-truncate">
                                                    {{ item.answer }}
                                                </Typography>
                                            </template>
                                        </ProfileWithText>
                                    </template>
                                </template>
                            </CoreCard>
                        </NewCol>
                    </NewRow>
                </NewGrid>
            `,
        }}
    </Story>
</Canvas>
